{"mappings":"AAMO,MAAMA,EAAc,CAACC,EAASC,KAEnC,IAAIC,EADJD,EAAQE,UAAY,GAEpBD,EAAO,8CAA8CF,QACrDC,EAAQG,mBAAmB,aAAcF,ICR9BG,EAAaC,MAAOL,EAAU,QACzCF,EAAY,eAAeE,GAC3B,IACE,MAAMM,QAAiBC,MAAM,2CAC7B,IAAKD,EAASE,GACZ,MAAM,IAAIC,MAAM,yBAIlB,MAAO,CACLC,SAAS,E,WAFQJ,EAASK,QAK5B,MAAOC,GACP,MAAO,CACLF,SAAS,EACTX,QAASa,EAAMb,WCLRc,EAAkB,IAAIC,sBATb,CAACC,EAASC,KAC9B,MAAOC,GAASF,EAEXE,EAAMC,iBAEXD,EAAME,OAAOC,UAAUC,OAAO,mBAC9BL,EAASM,UAAUL,EAAME,WAG4C,CACrEI,KAAM,KACNC,UAAW,KAgBAC,EAAc,IAAIX,sBAXb,CAACC,EAASC,KAC1BD,EAAQW,SAAST,IACXA,EAAMC,iBACRD,EAAME,OAAOQ,IAAMV,EAAME,OAAOS,QAAQD,IAGxCX,EAASM,UAAUL,EAAME,cAKgC,CAE7DK,UAAW,KC5BAK,EAAcxB,MAAOL,EAAU,QAC1C,IACI8B,EADA7B,EAAO,GAIX,MAAM8B,QAAc3B,EAAWJ,GAG/B,IAAK+B,EAAMrB,QAET,YADAZ,EAAY,GAAGiC,EAAMhC,cAAYC,GAInC,MAAMgC,KAAEA,GAASD,EAAMC,KAAKC,QAG5B,IAAIC,EACAlC,EAAQoB,UAAUe,SAAS,WAC7BD,EAAqBE,EAAUJ,EAAM,QACrCF,EAAS,CAAC,UAAW,UAAW,YACvB9B,EAAQoB,UAAUe,SAAS,YACpCD,EAAqBE,EAAUJ,EAAM,QACrCF,EAAS,CAAC,UAAW,UAAW,YAGlCI,EAAmBR,SAAQ,CAACW,EAAIC,KAE1BA,EAAQR,EAAOS,OAAS,IAAGD,EAAQ,GAEvCrC,GAAQ,8DAcP6B,EAAAQ,mLAI4C,YAApBR,EAAYQ,GAAQ,sBAAAD,EAAAG,8DAEhCH,EAAAI,qHAGXJ,EAAAK,wEAQN1C,EAAME,UAAA,GAGJF,EAAAG,mBAA4B,aAAAF,G,KAG5BmC,EAAA,CAAAO,EAAAC,I,iICjEIC,EAAWC,SAASC,iBAAiB,eACrCC,EAAaF,SAASC,iBAAiB,iBACvCE,EAAcH,SAASC,iBAAiB,YAG9CC,EAAWtB,SAASwB,IAClBzB,EAAY0B,QAAQD,MAItBD,EAAYvB,SAAQ,SAAU0B,GAC5BvC,EAAgBsC,QAAQC,MAKtBP,GACFA,EAASnB,SAAS2B,IAChBxB,EAAYwB","sources":["js/utilities.js","js/fetchBlogs.js","js/lazyLoading.js","js/renderBlogs.js","js/script.js"],"sourcesContent":["\"use strict\";\r\n/**\r\n * Display message in UI\r\n * @param {String} message\r\n * @param {DomElement} element\r\n */\r\nexport const loadMessage = (message, element) => {\r\n  element.innerHTML = \"\";\r\n  let html;\r\n  html = `<p style=\"color:white; text-align:center;\">${message}</p>`;\r\n  element.insertAdjacentHTML(\"afterbegin\", html);\r\n};\r\n","import { loadMessage } from \"./utilities.js\";\r\n\r\nexport const fetchBlogs = async (element = null) => {\r\n  loadMessage(\"Loading...ðŸš€\", element);\r\n  try {\r\n    const response = await fetch(\"https://calm-inlet-18337.herokuapp.com/\");\r\n    if (!response.ok) {\r\n      throw new Error(\"Couldn't fetch blogs'\");\r\n    }\r\n\r\n    const data = await response.json();\r\n    return {\r\n      success: true,\r\n      data,\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      message: error.message,\r\n    };\r\n  }\r\n};\r\n","\"use strict\";\r\n\r\n//-------------------\r\n// Lazy Load Sections\r\nconst revealSection = (entries, observer) => {\r\n  const [entry] = entries;\r\n\r\n  if (!entry.isIntersecting) return;\r\n\r\n  entry.target.classList.remove(\"section--hidden\");\r\n  observer.unobserve(entry.target);\r\n};\r\n\r\nexport const sectionObserver = new IntersectionObserver(revealSection, {\r\n  root: null,\r\n  threshold: 0.1,\r\n});\r\n\r\n//-------------------\r\n// Lazy Load Images\r\nconst loadImage = (entries, observer) => {\r\n  entries.forEach((entry) => {\r\n    if (entry.isIntersecting) {\r\n      entry.target.src = entry.target.dataset.src;\r\n\r\n      // unobserve\r\n      observer.unobserve(entry.target);\r\n    }\r\n  });\r\n};\r\n\r\nexport const imgObserver = new IntersectionObserver(loadImage, {\r\n  // play around with this\r\n  threshold: 0.5,\r\n});\r\n","\"use strict\";\r\nimport { fetchBlogs } from \"./fetchBlogs.js\";\r\nimport { loadMessage } from \"./utilities.js\";\r\nimport { imgObserver } from \"./lazyLoading.js\";\r\n\r\nexport const renderBlogs = async (element = null) => {\r\n  let html = ``;\r\n  let colors;\r\n\r\n  // fetch blogs\r\n  const blogs = await fetchBlogs(element);\r\n\r\n  //show error if it fails\r\n  if (!blogs.success) {\r\n    loadMessage(`${blogs.message}  ðŸš©`, element);\r\n    return;\r\n  }\r\n\r\n  const { data } = blogs.data.results;\r\n\r\n  // Limit to only 3 articles\r\n  let firstThreeArticles;\r\n  if (element.classList.contains(\"c-news\")) {\r\n    firstThreeArticles = filterArr(data, \"news\");\r\n    colors = [\"#ff9343\", \"#72ccca\", \"#ff6865\"];\r\n  } else if (element.classList.contains(\"c-jobs\")) {\r\n    firstThreeArticles = filterArr(data, \"jobs\");\r\n    colors = [\"#282828\", \"#ff6865\", \"#72ccca\"];\r\n  }\r\n\r\n  firstThreeArticles.forEach((el, index) => {\r\n    // reset colors after every 3 blogs\r\n    if (index > colors.length - 1) index = 0;\r\n\r\n    html += `\r\n        <div class=\"news__item\" style=\"background-color: ${colors[index]};\">\r\n          <div style=\"font-size: 1.6rem; font-weight: bold; display: inline-block; white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis; ${\r\n            colors[index] === \"#282828\" ? \"color: white\" : \"\"\r\n          }\">${el.name}</div>\r\n          <a href=\"https://news.wearecohere.org${\r\n            el.permalink\r\n          }\"><img style=\"height: 20rem; width: 100%;\"\r\n          src=\"../images/load-icon.png\"\r\n          data-src=\"${el.image}\" referrerpolicy=\"no-referrer\"></a>\r\n        </div>\r\n        `;\r\n  });\r\n\r\n  element.innerHTML = \"\";\r\n  // insert blogs under the news div\r\n  element.insertAdjacentHTML(\"afterbegin\", html);\r\n\r\n  lazyLoadBlog();\r\n};\r\n\r\nconst filterArr = (arr, category) => {\r\n  const returnedArray = arr\r\n    .filter((blog) => blog.category.includes(category))\r\n    .slice(0, 3);\r\n\r\n  return returnedArray;\r\n};\r\n\r\nconst lazyLoadBlog = () => {\r\n  const imgTargets = document.querySelectorAll(\"img[data-src]\");\r\n\r\n  imgTargets.forEach((img) => {\r\n    imgObserver.observe(img);\r\n  });\r\n};\r\n","\"use strict\";\r\n\r\nimport { renderBlogs } from \"./renderBlogs.js\";\r\nimport { sectionObserver, imgObserver } from \"./lazyLoading.js\";\r\n\r\n//DOM ELEMENTS\r\nconst newsBlog = document.querySelectorAll(\".news__blog\");\r\nconst imgTargets = document.querySelectorAll(\"img[data-src]\");\r\nconst allSections = document.querySelectorAll(\".section\");\r\n\r\n// LAZY LOADING IMAGES SECTION\r\nimgTargets.forEach((img) => {\r\n  imgObserver.observe(img);\r\n});\r\n\r\n// REVEAL SECTIONS\r\nallSections.forEach(function (section) {\r\n  sectionObserver.observe(section);\r\n  // section.classList.add(\"section--hidden\");\r\n});\r\n\r\n// READ BLOGS SECTION\r\nif (newsBlog) {\r\n  newsBlog.forEach((news) => {\r\n    renderBlogs(news);\r\n  });\r\n}\r\n"],"names":["$5d6550968de8c61a$export$256bbd5aad6f8776","message","element","html","innerHTML","insertAdjacentHTML","$ce3ba961afdcb3a4$export$32571bc73c67d0d","async","response","fetch","ok","Error","success","json","error","$a908ea86829f5857$export$40856bbc529472d6","IntersectionObserver","entries","observer","entry","isIntersecting","target","classList","remove","unobserve","root","threshold","$a908ea86829f5857$export$95044a44f7153186","forEach","src","dataset","$172ec34f52825009$export$3bb840505b3a377a","colors","blogs","data","results","firstThreeArticles","contains","$172ec34f52825009$var$filterArr","el","index","length","name","permalink","image","arr","category","$63eb283d27decb4d$var$newsBlog","document","querySelectorAll","$63eb283d27decb4d$var$imgTargets","$63eb283d27decb4d$var$allSections","img","observe","section","news"],"version":3,"file":"index.1a73c369.js.map"}